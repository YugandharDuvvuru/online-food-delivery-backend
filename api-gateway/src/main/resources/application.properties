spring.application.name=APIGATEWAY
server.port=8080

# ============================
# Eureka Client Configuration
# ============================
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

# Force API Gateway to use IPs instead of hostnames from Eureka
eureka.instance.prefer-ip-address=true

# ============================
# Load Balancer Settings
# ============================

# Prevent DNS resolution for hostnames registered in Eureka
spring.cloud.loadbalancer.dns.host-resolver.enabled=false

# Prefer IP addresses for every discovered instance
spring.cloud.loadbalancer.health-check.enabled=true

# ============================
# Spring Cloud Gateway Settings
# ============================

# Do NOT auto-create routes from Eureka (we use manual Java routes)
spring.cloud.gateway.discovery.locator.enabled=false
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# (Important) Tell Gateway HTTP Client to use IPs
spring.cloud.gateway.httpclient.use-ip=true

# ============================
# Management / Actuator
# ============================
management.endpoints.web.exposure.include=health,info,gateway

# ============================
# Logging
# ============================
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.web=DEBUG


# ============================
# Compatibility Verifier (Disable)
# ============================
spring.cloud.compatibility-verifier.enabled=false
